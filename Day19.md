20240321

## 클린코드 11장 | 시스템

## 기억하고 싶은 내용은?

- 시스템 제작과 시스템 사용을 분리하라

  - 소프트웨어 시스템은 (애플리케이션 객체를 제작하고 의존성을 서로 '연결'하는) 준비 과정과 런타임 로직을 분리해야 한다.
  - 체계적이고 탄탄한 시스템을 만들고 싶다면 흔히 쓰는 좀스럽고 손쉬운 기법으로 모듈성을 깨서는 절대로 안 된다.
  - 설정 논리는 일반 실행 논리와 분리해야 모듈성이 높아진다.

    1. Main 분리
       - 생성과 관련한 코드는 모두 `main`이나 `main`이 호출하는 모듈로 옮기고, 나머지 시스템은 모든 객체가 생성되었고 모든 의존성이 연결되었다고 가정
    2. 팩토리
       - 객체가 생성되는 시점을 애플리케이션이 결정할 필요도 생긴다.
       - 생성되는 시점에 대한 주도권을 애플리케이션에 넘기고, 객체를 생성하는 코드는 `main`에 두어 생성하는 코드를 애플리케이션이 모르도록 함.
    3. 의존성 주입
       - 제어 역전 기법을 의존성 관리에 적용해 사용과 제작을 분리하는 강력한 메커니즘
       - 새로운 객체는 **넘겨받은 책임**만 맡으므로 단일 책임 원칙을 지키게 된다.

- 확장
  - '처음부터 올바르게' 시스템을 만들 수 있다는 믿음은 미신이다.
  - 대신에 우리는 오늘 주어진 사용자 스토리에 맞춰 시스템을 구현해야 한다.
  - 내일은 새로운 스토리에 맞춰 시스템을 조정하고 확장하면 된다.
  - \*\*이것에 반복적이고 점진적인 애자일 방식의 핵심이다.

- 흔히 (메서드 가로채기, 프록시 등) AOP를 구현하는 기법과 AOP 자체를 혼동한다. AOP 시스템의 진정한 가치는 시스템 동작을 간결하고 모듈화된 방식으로 명시하는 능력이다.
- 관점으로 관심사를 분리하는 방식은 그 위력이 막강하다
- 코드 수준에서 관심사를 분리할 수 있다면, 진정한 테스트 주도 아키텍처 구축이 가능해진다.
- 그때그때 새로운 기술을 채택해 단순한 아키텍처를 복잡한 아키텍처로 키워갈 수도 있다.
- BDUF를 추구할 필요가 없다.
  - 실제로 BDUF는 해롭기까지 하다.
  - 처음에 쏟아 부은 노력을 버리지 않으려는 심리적 저항으로 인해, 그리고 처음 선택한 아키텍처가 향후 사고 방식에 미치는 영향으로 인해, 변경을 쉽사리 수용하지 못하는 탓이다.

- 명백한 가치가 있을 때 표준을 현명하게 사용하라
  - 표준을 사용하면 아이디어와 컴포넌트를 재사용하기 쉽고, 적절한 경험을 가진 사람을 구하기 쉬우며, 좋은 아이디어를 캡슐화하기 쉽고, 컴포넌트를 엮기 쉽다.
  - 하지만 때로는 표준을 만드는 시간이 너무 오래 걸려 업계가 기다리지 못한다.
  - 어떤 표준은 원래 표준을 제정한 목적을 잊어버리기도 한다.
